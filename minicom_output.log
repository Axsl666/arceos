 

Phytium-Pi#
Phytium-Pi#
Phytium-Pi#go 0x90100000
## Starting application at 0x90100000 ...
aaaaaaaaaaaacarch = aarch64
platform = aarch64-phytium-pi
target = aarch64-unknown-none-softfloat
smp = 1
build_mode = release
log_level = debug

ccc[ 32.701859 0 axruntime:138] Logging is enabled.
[ 32.707588 0 axruntime:139] Primary CPU 512 started, dtb = 0x1.
[ 32.714706 0 axruntime:141] Found physcial memory regions:
c[ 32.721477 0 axruntime:144]   [PA:0x90100000, PA:0x9011e000) .text (READ | EXECUTE | RESERVED)
[ 32.731284 0 axruntime:144]   [PA:0x9011e000, PA:0x90124000) .rodata (READ | RESERVED)
[ 32.740398 0 axruntime:144]   [PA:0x90124000, PA:0x90128000) .data .tdata .tbss .percpu (READ | WRITE | RESERVED)
[ 32.751856 0 axruntime:144]   [PA:0x90128000, PA:0x90168000) boot stack (READ | WRITE | RESERVED)
[ 32.761925 0 axruntime:144]   [PA:0x90168000, PA:0x9018e000) .bss (READ | WRITE | RESERVED)
[ 32.771473 0 axruntime:144]   [PA:0x0, PA:0x1000) spintable (READ | WRITE | RESERVED)
[ 32.780500 0 axruntime:144]   [PA:0x9018e000, PA:0x9048e000) nocache memory (READ | WRITE | DEVICE)
[ 32.790742 0 axruntime:144]   [PA:0x9048e000, PA:0xffd00000) free memory (READ | WRITE | FREE)
[ 32.800551 0 axruntime:144]   [PA:0x2800c000, PA:0x2800d000) mmio (READ | WRITE | DEVICE | RESERVED)
[ 32.810880 0 axruntime:144]   [PA:0x2800d000, PA:0x2800e000) mmio (READ | WRITE | DEVICE | RESERVED)
[ 32.821209 0 axruntime:144]   [PA:0x2800e000, PA:0x2800f000) mmio (READ | WRITE | DEVICE | RESERVED)
[ 32.831538 0 axruntime:144]   [PA:0x2800f000, PA:0x28010000) mmio (READ | WRITE | DEVICE | RESERVED)
[ 32.841867 0 axruntime:144]   [PA:0x30000000, PA:0x38000000) mmio (READ | WRITE | DEVICE | RESERVED)
[ 32.852197 0 axruntime:144]   [PA:0x40000000, PA:0x80000000) mmio (READ | WRITE | DEVICE | RESERVED)
[ 32.862526 0 axruntime:144]   [PA:0x1000000000, PA:0x3000000000) mmio (READ | WRITE | DEVICE | RESERVED)
[ 32.873202 0 axruntime:223] Initialize global memory allocator...
[ 32.880493 0 axruntime:224]   use TLSF allocator.
[ 32.886398 0 axalloc:281] initialize global allocator at: free-[0xffff00009048e000, 0xffff0000ffd00000)
[ 32.897309 0 axruntime:158] Initialize kernel page table...
[ 32.903848 0 axruntime:258] Initialize global no cache memory allocator...
[ 32.911829 0 axalloc:297] initialize global allocator at: nocache-[0x9018e000,0x9048e000)
[ 32.921205 0 axruntime:165] Initialize platform devices...
[ 32.927886 0 axhal::platform::aarch64_common::gic:51] Initialize GICv2...
[ 32.935873 0 axtask::api:66] Initialize scheduling...
[ 32.942125 0 axtask::task:146] new task: Task(1, "idle")
[ 32.948635 0 axtask::task:146] new task: Task(3, "gc")
[ 32.954972 0 axalloc:126] expand heap memory: [0xffff0000904a0000, 0xffff0000904e0000)
[ 32.964089 0 axalloc:126] expand heap memory: [0xffff0000904e0000, 0xffff000090560000)
[ 32.973199 0 axtask::api:72]   use Round-robin scheduler.
[ 32.979793 0 axdriver:158] Initialize device drivers...
[ 32.986216 0 axdriver:159]   device model: static
[ 32.992118 0 driver_pci::phytium:18] PCIe link start @0xFFFF000040000000...
[ 33.000278 0 driver_pci::phytium:19] theroticly, since uboot had already initialized it, we need't to operate it any more!
[ 33.012516 0 axdriver::bus::pci:14] probing in pci.rs!
[ 33.018853 0 driver_pci::root_complex:96] into next!
[ 33.025016 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.031960 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.038904 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.045848 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.052792 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.059736 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.066680 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.073624 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.080568 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.087512 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.094456 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.101400 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.108344 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.115288 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.122232 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.129176 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.136120 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.143064 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.150008 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.156952 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.163896 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.170840 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.177784 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.184728 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.191672 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.198616 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.205560 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.212504 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.219448 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.226392 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.233336 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.240280 0 driver_pci::root_complex:139] vid FFFF, did FFFF
[ 33.247224 0 driver_pci::root_complex:116] none!
[ 33.253039 0 axdriver:190] number of usb host controller: 0
[ 33.259809 0 axruntime:191] Initialize interrupt handlers...
[ 33.266667 0 axruntime:201] Primary CPU 512 init OK.
[ 33.272830 0:2 driver_usb::host::xhci:62] [XHCI] Base addr: VA:0xffff000031a08000
[ 33.281513 0:2 driver_usb::host::xhci:73] [XHCI] Max_slots: 16, max_ports: 2, max_irqs: 1, page size: 1
[ 33.292854 0:2 driver_usb::host::xhci:124] [XHCI] Reset begin
[ 33.299043 0:2 driver_usb::host::xhci:125] [XHCI] Stop
[ 33.305380 0:2 driver_usb::host::xhci:133] [XHCI] Until halt
[ 33.312237 0:2 driver_usb::host::xhci:135] [XHCI] Halted
[ 33.318747 0:2 driver_usb::host::xhci:140] [XHCI] Wait for ready...
[ 33.326212 0:2 driver_usb::host::xhci:142] [XHCI] Ready
[ 33.332636 0:2 driver_usb::host::xhci:150] [XHCI] Reset HC
[ 33.339319 0:2 driver_usb::host::xhci:164] [XHCI] XCHI reset ok
[ 33.346436 0:2 driver_usb::host::xhci:170] [XHCI] Setting enabled slots to 16.
[ 33.354857 0:2 driver_usb::host::xhci:180] [XHCI] Writing DCBAAP: 9018F000
[ 33.362929 0:2 driver_usb::host::xhci:191] [XHCI] Writing CRCR: 901AF880
[ 33.370827 0:2 driver_usb::host::xhci:235] [XHCI] Disable interrupts
[ 33.378379 0:2 driver_usb::host::xhci:245] [XHCI] Writing ERSTZ
[ 33.385496 0:2 driver_usb::host::xhci:249] [XHCI] Writing ERDP: 901B0900
[ 33.393396 0:2 driver_usb::host::xhci:256] [XHCI] Writing ERSTBA: 901B08C0
[ 33.401469 0:2 driver_usb::host::xhci:267] [XHCI] Enabling primary interrupter.
[ 33.409974 0:2 driver_usb::host::xhci:397] [XHCI] Scratch buf count: 0
[ 33.417699 0:2 driver_usb::host::xhci:217] [XHCI] Start run
[ 33.424470 0:2 driver_usb::host::xhci:224] [XHCI] Is running
[ 33.431327 0:2 driver_usb::host::xhci:380] [XHCI] Test command ring
[ 33.438792 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 0
[ 33.446169 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 0
[ 33.453894 0:2 driver_usb::host::xhci:291] [XHCI] Post cmd Noop(Noop { cycle_bit: true }) @FFFF0000901674D4
[ 33.464832 0:2 driver_usb::host::xhci:303] [XHCI] Wait result
[ 33.471777 0:2 driver_usb::host::xhci:320] event: PortStatusChange(PortStatusChange { completion_code: Ok(Success), port_id: 2, cycle_bit: true })
[ 33.486098 0:2 driver_usb::host::xhci:312] [XHCI] Cmd @901AF880 got result, cycle true
[ 33.495211 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 1
[ 33.502589 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 1
[ 33.510314 0:2 driver_usb::host::xhci:291] [XHCI] Post cmd Noop(Noop { cycle_bit: true }) @FFFF0000901674D4
[ 33.521251 0:2 driver_usb::host::xhci:303] [XHCI] Wait result
[ 33.528195 0:2 driver_usb::host::xhci:312] [XHCI] Cmd @901AF890 got result, cycle true
[ 33.537309 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 2
[ 33.544687 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 2
[ 33.552412 0:2 driver_usb::host::xhci:291] [XHCI] Post cmd Noop(Noop { cycle_bit: true }) @FFFF0000901674D4
[ 33.563349 0:2 driver_usb::host::xhci:303] [XHCI] Wait result
[ 33.570293 0:2 driver_usb::host::xhci:312] [XHCI] Cmd @901AF8A0 got result, cycle true
[ 33.579407 0:2 driver_usb::host::xhci:384] [XHCI] Command ring ok
[ 33.586698 0:2 driver_usb::host::xhci:440] [XHCI] Port 0 start reset
[ 33.594256 0:2 driver_usb::host::xhci:453] [XHCI] Port 0 reset ok
[ 33.601541 0:2 driver_usb::host::xhci:440] [XHCI] Port 1 start reset
[ 33.609101 0:2 driver_usb::host::xhci:453] [XHCI] Port 1 reset ok
[ 33.616384 0:2 driver_usb::host::xhci:98] [XHCI] Init success
[ 33.623332 0:2 driver_usb::host::xhci:465] [XHCI] Port 0: Enabled: false, Connected: false, Speed 0, Power true
[ 33.634613 0:2 driver_usb::host::xhci:465] [XHCI] Port 1: Enabled: true, Connected: true, Speed 4, Power true
[ 33.645723 0:2 driver_usb::host::xhci:660] [XHCI] CMD: enable slot
[ 33.653100 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 3
[ 33.660478 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 3
[ 33.668203 0:2 driver_usb::host::xhci:291] [XHCI] Post cmd EnableSlot(EnableSlot { slot_type: 0, cycle_bit: true }) @FFFF00009016741C
[ 33.681397 0:2 driver_usb::host::xhci:303] [XHCI] Wait result
[ 33.688341 0:2 driver_usb::host::xhci:320] event: PortStatusChange(PortStatusChange { completion_code: Ok(Success), port_id: 2, cycle_bit: true })
[ 33.702663 0:2 driver_usb::host::xhci:312] [XHCI] Cmd @901AF8B0 got result, cycle true
[ 33.711777 0:2 driver_usb::host::xhci:665] [XHCI] Result: CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417686704, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true }, slot id: 1
[ 33.732989 0:2 driver_usb::host::xhci:624] [XHCI] CMD: address device
[ 33.740595 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 4
[ 33.747973 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 4
[ 33.755698 0:2 driver_usb::host::xhci:291] [XHCI] Post cmd AddressDevice(AddressDevice { input_context_pointer: 2417569792, block_set_address_request: false, slot_id: 1, cycle_bit: true }) @FFFF0000901673AC
[ 33.775228 0:2 driver_usb::host::xhci:303] [XHCI] Wait result
[ 33.782172 0:2 driver_usb::host::xhci:312] [XHCI] Cmd @901AF8C0 got result, cycle true
[ 33.791286 0:2 driver_usb::host::xhci:633] [XHCI] Result: CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417686720, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true }
[ 33.811425 0:2 driver_usb::host::xhci:526] [XHCI] CMD: get endpoint0 packet size
[ 33.820018 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 0
[ 33.827395 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 0
[ 33.835120 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 1
[ 33.842498 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 1
[ 33.850223 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 2
[ 33.857601 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 2
[ 33.865326 0:2 driver_usb::host::xhci:346] [XHCI] Post control transfer!
[ 33.873226 0:2 driver_usb::host::xhci:356] [XHCI] Wait result
[ 33.880170 0:2 driver_usb::host::xhci:365] [XHCI] Transfer @901B1960 got result, cycle true
[ 33.889717 0:2 driver_usb::host::xhci:533] [XHCI] Result: TransferEvent { completion_code: Ok(Success), trb_pointer: 2417695072, trb_transfer_length: 0, event_data: false, endpoint_id: 1, slot_id: 1, cycle_bit: true }
[ 33.910202 0:2 driver_usb::host::xhci:547] [XHCI] CMD: evaluating context for set endpoint0 packet size
[ 33.920791 0:2 driver_usb::host::xhci::ring:46] enqueue trb into 5
[ 33.928169 0:2 driver_usb::host::xhci::ring:49] enqueued,next index: 5
[ 33.935894 0:2 driver_usb::host::xhci:291] [XHCI] Post cmd EvaluateContext(EvaluateContext { input_context_pointer: 2417569792, slot_id: 1, cycle_bit: true }) @FFFF0000901673AC
[ 33.952821 0:2 driver_usb::host::xhci:303] [XHCI] Wait result
[ 33.959765 0:2 driver_usb::host::xhci:312] [XHCI] Cmd @901AF8D0 got result, cycle true
[ 33.968879 0:2 driver_usb::host::xhci:553] [XHCI] Result: CommandCompletion { completion_code: Ok(Success), command_trb_pointer: 2417686736, command_completion_parameter: 0, vf_id: 0, slot_id: 1, cycle_bit: true }
[ 33.989073 0:2 axtask::run_queue:86] task exit: Task(2, "main"), exit_code=0
[ 33.997263 0:2 axhal::platform::aarch64_phytium_pi::misc:22] Shutting down...
